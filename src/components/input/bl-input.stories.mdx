import { html } from 'lit';
import { ifDefined } from 'lit/directives/if-defined.js';
import {
  Meta,
  Canvas,
  ArgsTable,
  Story,
} from '@storybook/addon-docs';
import {
  userEvent, within,
} from '@storybook/testing-library';

<Meta
  title="Components/Input"
  component="bl-input"
  argTypes={{
    label: {
      control: 'text',
    },
    type: {
      control: {
        type: 'select',
        options: ['number', 'text']
      },
    },
    placeholder: {
      control: 'text',
    },
    value: {
      control: 'text',
    },
    required: {
      control: 'boolean',
    },
    minlength: {
      control: 'text',
      type: 'number'
    },
    maxlength: {
      control: 'text',
      type: 'number'
    },
    min: {
      control: 'text',
      type: 'number'
    },
    max: {
      control: 'text',
      type: 'number'
    },
    icon: {
      control: 'text',
      type: 'string'
    },
    size: {
      control: {
        type: 'select',
        options: ['medium', 'large']
      },
      type: 'string'
    },
    disabled: {
      control: 'boolean',
    },
    labelFixed: {
      control: 'boolean',
    },
    customInvalidText: {
      control: 'text',
    },
    helpText: {
      control: 'text'
    }
  }}
/>

export const BlButton = args => html`
  <bl-button>Check</bl-button>`

export const SingleInputTemplate = (args) => html`<bl-input
    type='${ifDefined(args.type)}'
    label='${ifDefined(args.label)}'
    placeholder='${ifDefined(args.placeholder)}'
    value='${ifDefined(args.value)}'
    ?required='${args.required}'
    ?disabled='${args.disabled}'
    ?label-fixed='${args.labelFixed}'
    invalid-text='${ifDefined(args.customInvalidText)}'
    help-text='${ifDefined(args.helpText)}'
    minlength='${ifDefined(args.minlength)}'
    maxlength='${ifDefined(args.maxlength)}'
    min='${ifDefined(args.min)}'
    max='${ifDefined(args.max)}'
    icon='${ifDefined(args.icon)}'
    size='${ifDefined(args.size)}'
  ></bl-input>`

export const LabelStylesTemplate = args => html`
  ${SingleInputTemplate({ labelFixed: true, ...args })}
  ${SingleInputTemplate({ labelFixed: false, ...args })}
  ${BlButton()}
`

# Input

Input component is the component for taking text input from user.

## Basic Usage

Currently, input component supports `text` and `number` types, which default is `text`.

<Canvas>
  <Story name="Basic Input" args={{ placeholder: 'Enter Your Name' }}>
    {SingleInputTemplate.bind({})}
  </Story>
</Canvas>

## Input Labels

Input optionally can have a `label`.
If the label is set, it will be a floating label by default.
If you want to use always it on top of the input, then you can use `label-fixed` attribute.

<Canvas>
  <Story name="Input With Label"
         args={{ label: 'User Name', placeholder: 'Enter Your Name' }}>
    {SingleInputTemplate.bind({})}
  </Story>
  <Story name="Input With Fixed Label" args={{
    label: 'User Name',
    labelFixed: true,
    placeholder: 'Enter Your Name'
  }}>
    {SingleInputTemplate.bind({})}
  </Story>
  <Story name="Input Without Label" args={{ placeholder: 'Enter Your Name' }}>
    {SingleInputTemplate.bind({})}
  </Story>
</Canvas>

## Label Styles

Desc...

<Canvas>
  <Story name="Label Float"
         args={{ type: 'text', label: 'User Name', labelFixed: false }}>
    {SingleInputTemplate.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story name="Label Fixed"
         args={{ type: 'text', label: 'User Name', labelFixed: true }}>
    {SingleInputTemplate.bind({})}
  </Story>
</Canvas>

<Canvas>
  <Story name="Without Label"
         args={{ type: 'text', placeholder: 'Enter Name' }}>
    {SingleInputTemplate.bind({})}
  </Story>
</Canvas>

## Input Validation

Desc...

<Canvas>
  <Story name="Validation"
         args={{ type: 'text', label: 'User Name', required: true }}
         play={async ({ canvasElement }) => {
           const canvas = within(canvasElement);
           const el = canvas.getByTestId('bl-input-name')
           el.reportValidity()
         }}
  >
    {SingleInputTemplate.bind({})}
  </Story>
</Canvas>

TBD

## Reference

<ArgsTable of="bl-input" />
