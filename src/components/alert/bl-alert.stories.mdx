import { html } from 'lit';
import { ifDefined } from 'lit/directives/if-defined.js';
import { styleMap } from 'lit/directives/style-map.js';
import { unsafeHTML } from 'lit/directives/unsafe-html.js';
import { INITIAL_VIEWPORTS } from '@storybook/addon-viewport';

import { Meta, Canvas, ArgsTable, Story, Preview, Source } from '@storybook/addon-docs';

<Meta
  title="Components/Alert"
  component="bl-alert"
  argTypes={{
    variant: {
      options: ['info', 'warning', 'success', 'error'],
      default: 'info',
      control: { type: 'select' }
    },
    description: {
      type: 'text'
    },
    icon: {
      control: 'text'
    },
    closable: {
      control: 'boolean'
    },
    caption: {
      control: 'text'
    },
  }}
/>

export const SingleAlertTemplate = (args) => html`<bl-alert
    variant=${ifDefined(args.variant)}
    icon=${ifDefined(args.icon)}
    closable=${ifDefined(args.closable)}
    caption=${ifDefined(args.caption)}>
    ${unsafeHTML(args.content)}
  </bl-alert>`

export const actionSlot = `<bl-button
  slot="action"
  href="https://github.com/Trendyol/baklava"
  target="_blank"
  >
    Action Link
  </bl-button>`

# Alert
Alert component displays an informational message to users with additional features if desired.

### Usage

* Explain how to resolve the issue by including any troubleshooting actions or next steps.
* You can include links within the notification body that redirect the user to next steps by using an actionable notification.
* Alerts can be closable, use the icon button for closing action on the right.
* Default alert is Captionless Informational Alert without icon.
* We have default icons that we recommend in our icon alert variants but these icons can be changed from the icon list.

## Alert Variants

We have 4 variants for each alert: **Info**, **Warning**, **Success** and **Error**.

<Canvas isColumn>
  <Story name="Info Variant" args={{content: 'Info Variant'}}>
      {SingleAlertTemplate.bind({})}
  </Story>
  <Story name="Warning Variant" args={{variant: 'warning', icon: true, content: 'Warning Variant'}}>
      {SingleAlertTemplate.bind({})}
  </Story>
  <Story name="Success Variant" args={{variant: 'success', content: 'Success Variant'}}>
      {SingleAlertTemplate.bind({})}
  </Story>
  <Story name="Error Variant" args={{variant: 'error', icon: true, content: 'Error Variant'}}>
      {SingleAlertTemplate.bind({})}
  </Story>
</Canvas>

## Alert Types

We have 2 types of alerts: **Captionless** (Default) and **Captioned**.

### Captioned Alert

The caption should be one line, short and descriptive. In detailed description be concise and avoid repeating or paraphrasing the caption.

<Canvas isColumn>
  <Story name="Captioned Info Alert">
    {SingleAlertTemplate({caption: "Info Caption", content: "Detailed description.", icon: true})}
  </Story>
  <Story name="Captioned Warning Alert">
      {SingleAlertTemplate({variant: "warning", caption: "Warning Caption", content: `${actionSlot} Detailed description.`})}
  </Story>
  <Story name="Captioned Success Alert">
    {SingleAlertTemplate({variant: "success", caption: "Success Caption", content: "Detailed description.", closable: true})}
  </Story>
  <Story name="Captioned Error Alert">
    {SingleAlertTemplate({variant: "error", caption: "Error Caption", content: `${actionSlot} Detailed description.`})}
  </Story>
</Canvas>

### Captionless Alert

Alerts don't always have to have a caption, you can use plain text to explain the situation.

<Canvas isColumn>
  <Story name="Captionless Info Alert">
    {SingleAlertTemplate({content: "Informational Text", icon: true})}
  </Story>
  <Story name="Captionless Warning Alert">
    {SingleAlertTemplate({variant: "warning", content: "Warning Text"})}
  </Story>
  <Story name="Captionless Success Alert">
    {SingleAlertTemplate({variant: "success",content: "Success Text", icon: true, closable: true})}
  </Story>
  <Story name="Captionless Error Alert">
    {SingleAlertTemplate({variant: "error", content: `${actionSlot} Error Text`})}
  </Story>
</Canvas>

## Responsivity

To maintain usability level of alert component, after 1024px width screen size or less (such as tablets and mobile screens):
Don't show actionable link as a button. Instead, give action link to all alert component area and show clickability with arrow icon.

<Canvas isColumn>
  <Story name="Responsive Alert without Action Slot"
  parameters={{
    chromatic: { viewports: [375] },
    viewport: {
      defaultViewport: "iphone6",
      viewports: INITIAL_VIEWPORTS
    },
  }}>
    {SingleAlertTemplate({caption: "Informational Caption", content: "Detailed description.", icon: true, closable: true})}
  </Story>
  <Story name="Responsive Alert with Action Slot"
  parameters={{
    chromatic: { viewports: [375] },
    viewport: {
      defaultViewport: "iphone6",
      viewports: INITIAL_VIEWPORTS,
    },
  }}>
    {SingleAlertTemplate({caption: "Informational Caption", content: `${actionSlot} Detailed description.`, icon: true, closable: true})}
  </Story>
</Canvas>

## Reference

<ArgsTable of="bl-alert" />

## Public Functions

* `open()`: Can be used to reopen closed alert.
* `close()`: Can be used to close alert.

Example usage;

```
document.querySelector('bl-alert').open();
document.querySelector('bl-alert').close();
```
