import { html } from 'lit';
import { ifDefined } from 'lit/directives/if-defined.js';
import { styleMap } from 'lit/directives/style-map.js';
import { unsafeHTML } from 'lit/directives/unsafe-html.js';
import { Meta, Canvas, ArgsTable, Story, Preview, Source } from '@storybook/addon-docs';

<Meta
  title="Components/Select"
  component="bl-select"
  argTypes={{
      label: {
        control: 'text',
      },
      placeholder: {
        control: 'text',
      },
    }
  }
/>

export const SelectOptionsTemplate = () => html`
    <bl-select-option value="tr">Turkey</bl-select-option>
    <bl-select-option value="nl">Netherlands</bl-select-option>`

export const SelectOptionsTemplateSelected = () => html`
    <bl-select-option value="tr" selected>Turkey</bl-select-option>
    <bl-select-option value="nl">Netherlands</bl-select-option>`


export const SelectTemplate = (args) => html`
  <bl-select
  label='${ifDefined(args.label)}'
  ?label-fixed='${args.labelFixed}'
  ?multiple='${args.multiple}'
  ?required='${args.required}'
  ?error='${args.error}'
  ?success='${args.success}'
  size='${ifDefined(args.size)}'
  help-text='${ifDefined(args.helpText)}'
  invalid-text='${ifDefined(args.customInvalidText)}'
  placeholder='${ifDefined(args.placeholder)}'>
  ${args.slot}
  </bl-select>`

export const Template = (args) => html`
<div style="height: 7rem;">
  ${SelectTemplate(args)}
</div>`
export const TemplateWithoutOptions = (args) => html`${SelectTemplate(args)}`

# Select
Select component is a component for selecting a value from a list of options.

## Basic Usage
<Canvas>
  <Story name="Select" args={{ slot: SelectOptionsTemplate(), placeholder: "Choose country" }}>
    {Template.bind({})}
  </Story>
  <Story name="Select With Selected Option" args={{ slot: SelectOptionsTemplateSelected(), placeholder: "Choose country"  }}>
    {SelectTemplate.bind({})}
  </Story>
</Canvas>

## Multiple Select
There will be checkboxes in select menu when `multiple` attribute is set to true.
Selected options will be visible on input seperated by commas.
<Canvas>
  <Story name="Multiple Select" args={{ slot: SelectOptionsTemplate(), placeholder: "Choose countries", multiple: true }}>
    {Template.bind({})}
  </Story>
  <Story name="Multiple Select With Selected Options" args={{ slot: SelectOptionsTemplateSelected(), placeholder: "Choose countries", multiple: true  }}>
    {SelectTemplate.bind({})}
  </Story>
</Canvas>

## Select Labels

Select component optionally can have a `label`.
If the label is set, it will be a floating label by default.
If you want to use always it on top of the input, then you can use `label-fixed` attribute.

<Canvas isColumn>
  <Story name="Select With Label" args={{ label: "Country" }}>
    {TemplateWithoutOptions.bind({})}
  </Story>
  <Story name="Select With Fixed Label" args={{ label: "Country", placeholder:"Choose country", labelFixed: true }}>
    {TemplateWithoutOptions.bind({})}
  </Story>
  <Story name="Select Without Label" args={{ placeholder: "Choose country" }}>
    {TemplateWithoutOptions.bind({})}
  </Story>
</Canvas>

## Select Help Text

You can give extra information to user with `help-text` attribute.

<Canvas>
  <Story name="Select Help Text" args={{ helpText: 'You should select your country' }}>
    {TemplateWithoutOptions.bind({})}
  </Story>
</Canvas>

## Select Validation

Select component supports only `required` rule just for now. Other validation rules will come soon.

Select validation will run after user selects a value and go out from the input. If there is a validation issue, select will be highlighted in error state. After this state every change will have immediate effect on input to update validation state.

<Canvas>
  <Story name="Validation with Text Input" args={{ slot: SelectOptionsTemplate(), label: 'Choose country', required: true }}>
    {Template.bind({})}
  </Story>
</Canvas>

You can set an error message by setting `invalid-text` attribute.

<Canvas>
  <Story name="Custom Error Message"
         args={{ slot: SelectOptionsTemplate(), label: 'Choose country', required: true, customInvalidText: 'This field is mandatory' }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Select Sizes

Select have 3 size options: `small`, `medium` and `large`. `medium` size is default and if you want to show select in another size you can set `size` attribute to `large` or `small`.

<Canvas>
  <Story name="Small Select" args={{ label: 'Choose country', size: 'small' }}>
    {TemplateWithoutOptions.bind({})}
  </Story>
  <Story name="Medium Select" args={{ label: 'Choose country' }}>
    {TemplateWithoutOptions.bind({})}
  </Story>
  <Story name="Large Select" args={{ label: 'Choose country', size: 'large' }}>
    {TemplateWithoutOptions.bind({})}
  </Story>
</Canvas>

## Select Success and Error States

Select component supports success and error states. You can set `success` attribute to `true` to show success state or `error` attribute to `true` to show error state.

<Canvas>
  <Story name="Select Success" args={{ slot: SelectOptionsTemplateSelected(), label: 'Choose country', success: true }}>
    {Template.bind({})}
  </Story>
  <Story name="Select Error" args={{ slot: SelectOptionsTemplate(), label: 'Choose country', error: true }}>
    {Template.bind({})}
  </Story>
</Canvas>

## Reference

<ArgsTable of="bl-select" />
